(()=>{"use strict";var t={popupAddCardSelector:".popup_new-place",popupEditProfileSelector:".popup_edit",popupConfirmationSelector:".popup_confirmation",popupImageSelector:".popup_foolscreen-card",popupChangeAvatarSelector:".popup_change-avatar",formSelector:".popup__form",inputSelector:".popup__item",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_disabled",inputErrorClass:"popup__item_type_error",containerSelector:".grid-zona",btnAddCardSelector:".profile__add",btnEditProfileSelector:".profile__edit",userNameSelector:".profile__name",aboutSelector:".profile__about",templateSelector:".template"};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var o=function(){return t=function t(e,n,o,i,u,a){var c,l,s,f=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c=this,s=function(t){return t.likes.some((function(t){return t._id===f._userId}))},(l=r(l="_hasLike"))in c?Object.defineProperty(c,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):c[l]=s,this._data=e,this._name=this._data.name,this._link=this._data.link,this._templateSelector=n,this._openCard=o,this._openPopupWithConfirmation=i,this._putLike=u,this._userId=a},(e=[{key:"_setEventListeners",value:function(){var t=this;this._cardImage.addEventListener("click",(function(){t._openCard(t._name,t._link)})),this._element.querySelector(".card__delete").addEventListener("click",(function(){t._openPopupWithConfirmation(t)})),this._element.querySelector(".card__like").addEventListener("click",(function(e){t._toggleLike(e)}))}},{key:"deleteCard",value:function(){this._element.closest(".card").remove()}},{key:"_toggleLike",value:function(t){t.target.classList.contains("card__like_active")?this._putLike(this,"DELETE"):this._putLike(this,"PUT")}},{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}},{key:"setLikes",value:function(t){this._heart=this._element.querySelector(".card__like"),this._heart.dataset.like=t.likes.length,this._hasLike(t)?this._heart.classList.add("card__like_active"):this._heart.classList.contains("card__like_active")&&this._heart.classList.remove("card__like_active")}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".card__image"),this._element.querySelector(".card__name-place").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._showTrash(),this.setLikes(this._data),this._setEventListeners(),this._element}},{key:"_showTrash",value:function(){this._data.owner._id===this._userId&&this._element.querySelector(".card__delete").classList.remove("hide")}}])&&n(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function a(t,e,n){return(e=c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}var l=function(){return t=function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"_hideInputError",(function(t,e){t.classList.remove(r._inputErrorClass),e.textContent=""})),a(this,"_inputIsValid",(function(t,e){t.validity.valid?r._hideInputError(t,e):r._showInputError(t,e)})),a(this,"_hasInputValid",(function(){return r._inputList.some((function(t){return!t.validity.valid}))})),a(this,"_toggleButtonState",(function(){r._hasInputValid()?r._disabledSubmitBtn():r._enableSubmitBtn()})),a(this,"_disabledSubmitBtn",(function(){r._btnSubmit.classList.add(r._inactiveButtonClass),r._btnSubmit.disabled=!0})),a(this,"_enableSubmitBtn",(function(){r._btnSubmit.classList.remove(r._inactiveButtonClass),r._btnSubmit.disabled=!1})),a(this,"_handeleFormInput",(function(t){var e=t.target;r._inputIsValid(e,r._getformError(e))})),this._form=e,this._inactiveButtonClass=n.inactiveButtonClass,this._inputErrorClass=n.inputErrorClass,this._btnSubmit=this._form.querySelector(n.submitButtonSelector),this._inputList=Array.from(this._form.querySelectorAll(n.inputSelector))},(e=[{key:"enableValidation",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(e){t._handeleFormInput(e),t._toggleButtonState()}))})),this._setEventListeners()}},{key:"_setEventListeners",value:function(){var t=this;this._form.addEventListener("reset",(function(){setTimeout((function(){t._toggleButtonState(),t._inputList.forEach((function(e){t._hideInputError(e,t._getformError(e))}))}),0)}))}},{key:"_showInputError",value:function(t,e){t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage}},{key:"_getformError",value:function(t){return this._form.querySelector(".".concat(t.name,"-error"))}}])&&u(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p(r.key),r)}}function p(t){var e=function(t){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}var y=function(){return t=function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)},(e=[{key:"renderItems",value:function(t){t.forEach(this._renderer)}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&f(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function m(t){var e=function(t){if("object"!=b(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:e+""}var h=function(){return t=function t(e){var n,r,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=function(t){"Escape"===t.key&&i.close()},(r=m(r="_handleEscape"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popup=document.querySelector(e)},(e=[{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close"))&&t.close()}))}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscape)}},{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscape)}}])&&d(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S(r.key),r)}}function S(t){var e=function(t){if("object"!=v(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==v(e)?e:e+""}function g(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(g=function(){return!!t})()}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},w.apply(null,arguments)}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}var P=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,n){return e=k(e),function(t,e){if(e&&("object"==v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,g()?Reflect.construct(e,n||[],k(t).constructor):e.apply(t,n))}(this,e,[t]))._fullscreenImage=n._popup.querySelector(".popup__card-image"),n._name=n._popup.querySelector(".popup__card-title"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(e,t),n=e,r=[{key:"open",value:function(t,n){var r,o,i;this._name.textContent=t,this._fullscreenImage.src=n,this._fullscreenImage.alt=t,(r=e,o=this,"function"==typeof(i=w(k(1&3?r.prototype:r),"open",o))?function(t){return i.apply(o,t)}:i)([])}}],r&&_(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(h);function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L(r.key),r)}}function L(t){var e=function(t){if("object"!=O(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==O(e)?e:e+""}function C(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(C=function(){return!!t})()}function I(t,e,n,r){var o=T(q(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof o?function(t){return o.apply(n,t)}:o}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=q(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},T.apply(null,arguments)}function q(t){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},q(t)}function B(t,e){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B(t,e)}var R=function(t){function e(t){var n,r=t.selector,o=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,n){return e=q(e),function(t,e){if(e&&("object"==O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,C()?Reflect.construct(e,n||[],q(t).constructor):e.apply(t,n))}(this,e,[r]))._handleFormSubmit=o,n._form=n._popup.querySelector(".popup__form"),n._inputList=n._form.querySelectorAll(".popup__item"),n._submitButton=n._popup.querySelector(".popup__save"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}(e,t),n=e,(r=[{key:"setEventListeners",value:function(){var t=this;this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues()),t.renderLoading(!0)})),I(e,"setEventListeners",this,3)([])}},{key:"renderLoading",value:function(t){t?(this._submitButton.textContent="Сохранение",this._submitButton.classList.add("loading")):(this._submitButton.classList.remove("loading"),this._submitButton.textContent="Сохранить")}},{key:"close",value:function(){this._form.reset(),I(e,"close",this,3)([])}},{key:"_getInputValues",value:function(){var t={};return this._inputList.forEach((function(e){return t[e.name]=e.value})),t}}])&&j(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(h);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D(r.key),r)}}function D(t){var e=function(t){if("object"!=U(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==U(e)?e:e+""}var x=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=document.querySelector(e),this._about=document.querySelector(n),this._avatarElement=r},(e=[{key:"getId",value:function(){return this._id}},{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(t){this._name.textContent=t.name,this._about.textContent=t.about,this._id=t._id}},{key:"setAvatar",value:function(t){this._avatarElement.style.backgroundImage="url(".concat(t,")")}}])&&A(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,N(r.key),r)}}function N(t){var e=function(t){if("object"!=F(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==F(e)?e:e+""}var J=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e.baseUrl,this._token=e.headers},(e=[{key:"_getResponseData",value:function(t){return t.ok?t.json():Promise.reject(t.status)}},{key:"getInitialCards",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._token}).then((function(e){return t._getResponseData(e)}))}},{key:"getUserInfo",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._token}).then((function(e){return t._getResponseData(e)}))}},{key:"addCard",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._token,body:JSON.stringify(t)}).then((function(t){return e._getResponseData(t)}))}},{key:"editUserInfo",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._token,body:JSON.stringify(t)}).then((function(t){return e._getResponseData(t)}))}},{key:"deleteCard",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this._token}).then((function(t){return e._getResponseData(t)}))}},{key:"togleLike",value:function(t,e){var n=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:e,headers:this._token}).then((function(t){return n._getResponseData(t)}))}},{key:"changeAvatar",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._token,body:JSON.stringify(t)}).then((function(t){return e._getResponseData(t)}))}}])&&V(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,W(r.key),r)}}function W(t){var e=function(t){if("object"!=z(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==z(e)?e:e+""}function M(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(M=function(){return!!t})()}function G(t,e,n,r){var o=K(Q(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof o?function(t){return o.apply(n,t)}:o}function K(){return K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Q(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},K.apply(null,arguments)}function Q(t){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Q(t)}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X(t,e)}var Y=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,n){return e=Q(e),function(t,e){if(e&&("object"==z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,M()?Reflect.construct(e,n||[],Q(t).constructor):e.apply(t,n))}(this,e,[t]))._deleteCard=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X(t,e)}(e,t),n=e,(r=[{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("submit",(function(e){e.preventDefault(),t._deleteCard(t.card)})),G(e,"setEventListeners",this,3)([])}},{key:"open",value:function(t){this.card=t,G(e,"open",this,3)([])}}])&&H(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(h),Z=document.querySelector(t.btnEditProfileSelector),$=document.querySelector(t.btnAddCardSelector),tt=Array.from(document.querySelectorAll(t.formSelector)),et=document.querySelector(t.userNameSelector),nt=document.querySelector(t.aboutSelector),rt=document.querySelector(t.popupEditProfileSelector),ot=rt.querySelector(".popup__name"),it=rt.querySelector(".popup__about"),ut=document.querySelector(".profile__avatar"),at=new J({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-mag-4",headers:{authorization:"93c90859-501a-40fa-a2ac-1175f2406f19","Content-Type":"application/json"}}),ct=function(e){var n=new o(e,t.templateSelector,yt,bt,dt,pt.getId()).generateCard();lt.addItem(n)},lt=new y({renderer:ct},t.containerSelector),st=new P(t.popupImageSelector),ft=new Y(t.popupConfirmationSelector,(function(t){at.deleteCard(t._data._id).then((function(){t.deleteCard(),ft.close()})).catch((function(t){console.log("Ошибка: ".concat(t))}))})),pt=new x(t.userNameSelector,t.aboutSelector,ut);Promise.all([at.getUserInfo(),at.getInitialCards()]).then((function(t){pt.setUserInfo(t[0]),pt.setAvatar(t[0].avatar),lt.renderItems(t[1])})).catch((function(t){console.log("Ошибка: ".concat(t))}));var yt=function(t,e){st.open(t,e)},bt=function(t){ft.open(t)},dt=function(t,e){at.togleLike(t._data._id,e).then((function(e){t.setLikes(e)})).catch((function(t){console.log("Ошибка: ".concat(t))}))},mt=new R({selector:t.popupAddCardSelector,handleFormSubmit:function(t){at.addCard(t).then((function(t){ct(t),mt.close()})).catch((function(t){console.log("Ошибка: ".concat(t))})).finally((function(){mt.renderLoading(!1)}))}}),ht=new R({selector:t.popupEditProfileSelector,handleFormSubmit:function(t){at.editUserInfo(t).then((function(t){pt.setUserInfo(t),ht.close()})).catch((function(t){console.log("Ошибка: ".concat(t))})).finally((function(){ht.renderLoading(!1)}))}}),vt=new R({selector:t.popupChangeAvatarSelector,handleFormSubmit:function(t){at.changeAvatar(t).then((function(t){pt.setAvatar(t.avatar),vt.close()})).catch((function(t){console.log("Ошибка: ".concat(t))})).finally((function(){vt.renderLoading(!1)}))}});tt.forEach((function(e){new l(e,t).enableValidation()})),st.setEventListeners(),ft.setEventListeners(),mt.setEventListeners(),ht.setEventListeners(),vt.setEventListeners(),$.addEventListener("click",mt.open.bind(mt)),ut.addEventListener("click",vt.open.bind(vt)),Z.addEventListener("click",(function(){ot.value=et.textContent,it.value=nt.textContent,ht.open()}))})();